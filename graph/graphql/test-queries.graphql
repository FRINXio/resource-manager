mutation createNewResourceType {
    CreateResourceType(
        resourceName: "vlan",
        resourceProperties: {
            vlan: "int"
        }
    ) {
        ID
        Name
    }
}

mutation createComplexResourceType {
    CreateResourceType(
        resourceName: "complex",
        resourceProperties: {
            a: "int",
            b: "string"
        }
    ) {
        ID
        Name
    }
}

query queryResourceTypes {
    QueryResourceTypes{
        ID
        Name
        Edges {
# FIXME PropertyTypes returns null
            PropertyTypes {
                Name
                Type
            }
        }
    }
}

mutation createSetPool {
    CreateSetPool(
        resourceTypeId: 25769803776,
        poolName: "vlan_test4",
        poolValues: [{vlan: 13}, {vlan: 14},],
        poolDealocationSafetyPeriod: 0
    ){
        ID
        PoolType
        Name
    }
}

mutation createAllocationStratJs {
    CreateAllocationStrategy(
        name: "jstest",
        script: "function invoke() {log(\"log\");return {vlan: userInput.desiredVlan, respool: resourcePool.ResourcePoolName, currentRes: currentResources};}",
        lang: js

    ){
        ID
        Name
        Lang
        Script
    }
}

mutation createAllocationStratPy {
    CreateAllocationStrategy(
        name: "pytest",
        script: "log(\"log\")\nreturn {\"vlan\": userInput[\"desiredVlan\"], \"respool\": resourcePool[\"ResourcePoolName\"], \"currentRes\": currentResources}"
        lang: py
    ){
        ID
        Name
        Lang
        Script
    }
}

query queryAllocationStrategies {
    QueryAllocationStrategies {
        ID
        Lang
        Name
        Script
    }
}

mutation deleteAllocationStrategy {
    DeleteAllocationStrategy(allocationStrategyId: 0){
        Name
    }
}

mutation TestAllocationStrategyJs {
    TestAllocationStrategy(
        allocationStrategyId: 1,
        resourcePool: { ResourcePoolName: "testpool"},
        currentResources: [{Properties: { value:1}}, {Properties: {value: 100}}],
        userInput: {desiredVlan: 11})
}

mutation TestAllocationStrategyPy {
    TestAllocationStrategy(
        allocationStrategyId: 2,
        resourcePool: { ResourcePoolName: "testpool"},
        currentResources: [{Properties: { value:1}}, {Properties: {value: 100}}],
        userInput: {desiredVlan: 11})
}

query queryAllocationStrats {
    QueryAllocationStrategies{
        ID
        Name
        Lang
        Script
    }
}

mutation createAllocationPool {
    CreateAllocatingPool(
        resourceTypeId: 25769803776,
        poolName: "vlan_allocating",
        allocationStrategyId: 1,
        poolDealocationSafetyPeriod: 0
    ){
        ID
        PoolType
        Name
    }
}

query QueryAllPools {
    QueryResourcePools{
        ID
        Name
        PoolType
# FIXME
#        Edges {
#            ResourceType {
#                Name
#            }
#        }
    }
}

mutation ClaimResource {
    ClaimResource(poolId:21474836480, userInput: {}) {
        ID
        Properties
    }
}

mutation ClaimResourceFromAllocatingPool {
    ClaimResource(poolId:21474836481, userInput: {desiredVlan: 14}) {
        ID
        Properties
    }
}

query QueryResources {
    QueryResources(poolId:21474836481){
        ID
        Properties
    }
}

mutation freeResource {
    FreeResource(
        poolId: 21474836481,
        input: {vlan: 10}
    )
}

mutation deleteResourcePool {
    DeleteResourcePool(resourcePoolId:21474836481)
}

mutation deleteAllocationStrat {
    DeleteAllocationStrategy(
        allocationStrategyId: 1,
    ){
        Name
    }
}
